{"id":"2f7886ca-2662-4d11-b2b5-33e4a05efb3f","zed":"context","version":"0.4.0","text":"\n\n\nこのシェルスクリプトと同じことをする Go のコードを教えてください\nなお，実行するディレクトリは第一引数で指定できるようにして\n\n```fish\n#!/usr/bin/env fish\n\n# 現在のディレクトリ内のすべてのPDFファイルをループ\nfor pdf_file in *.pdf\n    # PDFファイル名から拡張子を取り除いてディレクトリ名を作成\n    set dir_name (basename $pdf_file .pdf)\n    \n    # ディレクトリが存在しない場合は作成\n    if not test -d $dir_name\n        mkdir $dir_name\n    end\n    \n    # PDFファイルを作成したディレクトリに移動\n    mv $pdf_file $dir_name/\nend\n```\n以下は、指定されたディレクトリ内のすべてのPDFファイルを処理し、各PDFファイルごとにディレクトリを作成してその中に移動するGoのコードです。実行するディレクトリは第一引数で指定できるようにしています。\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"os\"\n\t\"path/filepath\"\n\t\"strings\"\n)\n\nfunc main() {\n\tif len(os.Args) < 2 {\n\t\tfmt.Println(\"Usage: go run main.go <directory>\")\n\t\treturn\n\t}\n\n\tdir := os.Args[1]\n\n\t// 指定されたディレクトリ内のすべてのPDFファイルをループ\n\terr := filepath.Walk(dir, func(path string, info os.FileInfo, err error) error {\n\t\tif err != nil {\n\t\t\treturn err\n\t\t}\n\n\t\t// PDFファイルのみを処理\n\t\tif !info.IsDir() && strings.HasSuffix(info.Name(), \".pdf\") {\n\t\t\t// PDFファイル名から拡張子を取り除いてディレクトリ名を作成\n\t\t\tdirName := strings.TrimSuffix(info.Name(), \".pdf\")\n\t\t\tdirPath := filepath.Join(dir, dirName)\n\n\t\t\t// ディレクトリが存在しない場合は作成\n\t\t\tif _, err := os.Stat(dirPath); os.IsNotExist(err) {\n\t\t\t\tif err := os.Mkdir(dirPath, 0755); err != nil {\n\t\t\t\t\treturn err\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// PDFファイルを作成したディレクトリに移動\n\t\t\tnewPath := filepath.Join(dirPath, info.Name())\n\t\t\tif err := os.Rename(path, newPath); err != nil {\n\t\t\t\treturn err\n\t\t\t}\n\t\t}\n\n\t\treturn nil\n\t})\n\n\tif err != nil {\n\t\tfmt.Printf(\"Error: %v\\n\", err)\n\t}\n}\n```\n\nこのコードは以下の手順で動作します：\n\n1. コマンドライン引数からディレクトリを取得します。\n2. `filepath.Walk`を使用して指定されたディレクトリ内のすべてのファイルとディレクトリを再帰的に処理します。\n3. 各ファイルがPDFファイルかどうかをチェックし、PDFファイルの場合はそのファイル名から拡張子を取り除いてディレクトリ名を作成します。\n4. そのディレクトリが存在しない場合は作成し、PDFファイルをそのディレクトリに移動します。\n\nこのコードを実行するには、Goがインストールされている環境で以下のコマンドを使用します：\n\n```sh\ngo run main.go <directory>\n```\n\n`<directory>`には処理したいディレクトリのパスを指定してください。\n","messages":[{"id":{"replica_id":0,"value":0},"start":0,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":40}}},{"id":{"replica_id":0,"value":13},"start":673,"metadata":{"role":"assistant","status":"Done","timestamp":{"replica_id":0,"value":41}}},{"id":{"replica_id":0,"value":14},"start":2974,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":42}}}],"summary":"Go Code for PDF File Organization","slash_command_output_sections":[{"range":{"start":0,"end":1},"icon":"Library","label":"Default","metadata":null}]}